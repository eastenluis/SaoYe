//Created by olvan on 2016-06-27.

extends ../layouts/default

mixin post(post, isS3Enabled)
	.post.col-md-6
		if (post.postThumbnailImage.exists)
			- var postUrl = isS3Enabled ? post.postThumbnailImage.url : ('/post/images/' + post.postThumbnailImage.filename);
		else
			- var postUrl = '';
		div(style="background-image:url('" + postUrl + "');").post-thumbnail
			.category-labels
				if post.authors && post.authors.length
					span.label=post._.publishedDate.format('YYYY.MM.DD')
				if post.categories && post.categories.length
					each cat, cat_i in post.categories
						a(href='/articles/' + cat.key).label=cat.name
		.post-author-date
	
		.post-info
			a(href='/articles/post/' + post.slug).post-title
				!=post.title
			.post-brief
				!=post.content.brief
			
block content
	link(href="/styles/site/authorPost.min.css", rel="stylesheet")

	.container: .row
		.col-sm-8.col-sm-offset-2
			p: a(href='/author') &larr; 作者们
			.author-post-info
				if data.author
					.author-avatar
						if data.author.authorImage.exists
							img(src="" + data.author.authorImage.url || "/author/images/" + data.author.authorImage.filename)
					.author-name
						!=data.author.authorName
					.author-intro
						!=data.author.introduction.brief
				else
					h5 同志,这人我找不着了.
						
			h4 作品
			.articles.row
				if data.authorPosts.length
					each post in data.authorPosts
						+post(post, data.isS3Enabled)
				else
					.col-md-6
						p 我还在寻找灵感.
