// Created by olvan on 2016-06-26.

extends ../layouts/default

mixin author(author, isS3Enabled)
	.author.col-sm-6
		if author.authorImage.exists
			- var authorImgUrl = isS3Enabled ? author.authorImage.url : '/author/images/' + author.authorImage.filename;
		else
			- var authorImgUrl = '/images/saoye_logo_white.png';
		.author-image
			img(src=authorImgUrl)
		.author-introduction
			div(class="author-name")
				a(href='/author/' + author.slug) 
					!=author.authorName
			div(class="author-brief")
				!=author.introduction.brief

block intro
	.container
		h2.page-heading
			if data.category
				!=data.category.name
			else	
				.page-heading-name-ch 作者 
				.page-heading-name-en authors

block content
	link(href="/styles/site/author.min.css", rel="stylesheet")
	.container.container-author
		.row.author-list
			if data.authors.results.length
				each author in data.authors.results
					+author(author, data.isS3Enabled)

				if data.authors.totalPages > 1
					.col-xs-12.pagination-container
						ul.pagination
							if data.authors.previous
								li: a(href='?page=' + data.authors.previous): span.glyphicon.glyphicon-chevron-left
							else
								li.disabled: a(href='?page=' + 1): span.glyphicon.glyphicon-chevron-left
							each p, i in data.authors.pages
								li(class=data.authors.currentPage == p ? 'active' : null)
									a(href='?page=' + (p == '...' ? (i ? data.authors.totalPages : 1) : p ))= p
							if data.authors.next
								li: a(href='?page=' + data.authors.next): span.glyphicon.glyphicon-chevron-right
							else
								li.disabled: a(href='?page=' + data.authors.totalPages): span.entypo.glyphicon.glyphicon-chevron-right
			else
				p.text-muted 去玩躲猫猫咯！
